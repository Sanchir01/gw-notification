# GW Notification

Сервис уведомлений, который получает сообщения из Kafka и сохраняет их в MongoDB.

## Технологии

- Go 1.24.3
- MongoDB
- Kafka
- Docker & Docker Compose

## Запуск проекта

### Локальный запуск (без Docker)

1.  **Сборка проекта:**

    ```bash
    make build
    ```

2.  **Запуск:**
    Для запуска требуется файл `.env.prod`.
    ```bash
    make run
    ```

### Запуск с использованием Docker

Проект можно запустить с помощью Docker Compose.

1.  **Запуск зависимостей (MongoDB):**
    Эта команда запустит контейнер с MongoDB.

    ```bash
    docker-compose up -d
    ```

2.  **Полный запуск (приложение + зависимости):**
    Для полного запуска приложения и его зависимостей используйте команду из `Makefile`, которая, вероятно, использует более полный файл конфигурации `docker-compose`:
    ```bash
    make compose-prod
    ```

## Конфигурация

Проект конфигурируется через файлы в директории `config/` (например, `dev.yaml`). Также используются переменные окружения из файла, указанного в `ENV_FILE` (например, `.env.prod`).

Пример `config/dev.yaml`:

```yaml
env: "development"

domain: "localhost"

kafka:
  consumer:
    group_id: "notification"
    topic:
      - "notification"
    brokers:
      - "localhost:9092"

db:
  mongo:
    host: "localhost"
    port: "27017"
    database: "appdb"
```

## Структура проекта

- `cmd/main`: Точка входа в приложение.
- `internal/`: Внутренняя логика приложения.
  - `app/`: Инициализация зависимостей (DI).
  - `config/`: Логика работы с конфигурацией.
  - `domain/`: Доменные модели.
  - `feature/`: Бизнес-логика, разделенная по фичам.
  - `kafka/`: Компоненты для работы с Kafka.
- `pkg/`: Переиспользуемые пакеты.
  - `db/`: Логика для работы с базами данных.
  - `logger/`: Настроенный логгер.
- `config/`: Файлы конфигурации.
- `Dockerfile`: Определение Docker-образа приложения.
- `docker-compose.yaml`: Конфигурация для запуска зависимостей в Docker.
- `Makefile`: Команды для управления проектом.
